# 📝 עריכת הוצאות לפי קטגוריה - גרסה 2.6.1

## 🏆 פרטי הגרסה
**גרסה:** 2.6.1  
**תאריך:** 09/01/2026  
**מפתח:** בועז סעדה  

---

## 🎯 מה נוסף?

### ✨ תכונה חדשה: עריכת הוצאות לפי קטגוריה

בלשונית **"הוצאות"**, עכשיו אפשר **ללחוץ על כל קטגוריה** (חשמל, מעלית, ניקיון וכו') **ולערוך את כל ההוצאות בקטגוריה זו במסך ייעודי!**

---

## 🚀 איך זה עובד?

### 1️⃣ **לחיצה על קטגוריה**

עכשיו כל כרטיס קטגוריה בלשונית "הוצאות" הוא **לחיץ** (clickable):

- 🔵 **חשמל** → לחיצה → מסך עם כל הוצאות החשמל
- 🟣 **מעלית** → לחיצה → מסך עם כל הוצאות המעלית
- 🟢 **ניקיון** → לחיצה → מסך עם כל הוצאות הניקיון
- 🌿 **גינון** → לחיצה → מסך עם כל הוצאות הגינון
- 🟡 **תחזוקה** → לחיצה → מסך עם כל הוצאות התחזוקה
- 🔴 **קולטים** → לחיצה → מסך עם כל הוצאות הקולטים
- 🔵 **מים** → לחיצה → מסך עם כל הוצאות המים
- 🟣 **אחר** → לחיצה → מסך עם כל הוצאות האחר

**איך תדע שזה לחיץ?**
- סמן העכבר משתנה ל-**pointer** (יד) כשמעבירים על הקטגוריה
- יש **אייקון ✏️ קטן** ליד שם הקטגוריה
- יש **tooltip** (הסבר) בעברית: "לחץ לעריכת כל ההוצאות בקטגוריה זו"

---

### 2️⃣ **מסך עריכה מיוחד**

אחרי לחיצה על קטגוריה, נפתח **מודל (modal) גדול** עם:

#### 📊 **טבלה מסודרת** עם כל ההוצאות בקטגוריה:

| תאריך | תיאור | סכום | שילם | הערות | קבלה | פעולות |
|-------|-------|------|------|-------|------|--------|
| 05/01/2026 | חשבון חשמל ינואר | ₪850 | יוסי כהן | - | 📷 | ✏️ 🗑️ |
| 02/12/2025 | חשבון חשמל דצמבר | ₪920 | יוסי כהן | - | - | ✏️ 🗑️ |

#### 🎯 **עמודות:**
- **תאריך** - תאריך ההוצאה (ממוין מהחדש לישן)
- **תיאור** - תיאור ההוצאה
- **סכום** - סכום ההוצאה ב-₪ (בולט)
- **שילם** - שם מי ששילם
- **הערות** - הערות נוספות (אם יש)
- **קבלה** - כפתור 📷 לצפייה בקבלה (אם קיימת)
- **פעולות** - כפתורי ✏️ ערוך ו-🗑️ מחק

---

### 3️⃣ **פעולות מהירות במסך עריכה**

#### ✏️ **עריכת הוצאה**
- לחיצה על כפתור **עריכה** (✏️)
- נפתח מודל עריכת הוצאות המלא
- ניתן לשנות: תאריך, תיאור, סכום, מי שילם, הערות, קבלה
- שמירה → **הטבלה מתעדכנת אוטומטית**

#### 🗑️ **מחיקת הוצאה**
- לחיצה על כפתור **מחיקה** (🗑️)
- בקשת אישור: "האם אתה בטוח שברצונך למחוק הוצאה זו?"
- אישור → **ההוצאה נמחקת מיידית**
- הטבלה במסך עריכה **מתעדכנת אוטומטית**
- גם הטבלה הראשית בלשונית הוצאות **מתעדכנת**

#### 📷 **צפייה בקבלה**
- אם יש קבלה מצורפת → כפתור **ירוק** 📷
- לחיצה → **הקבלה נפתחת במסך מלא**
- אפשר להוריד את הקבלה

#### ➕ **הוספת הוצאה חדשה בקטגוריה**
- כפתור **"הוסף הוצאה חדשה בקטגוריה זו"**
- פותח את מודל הוספת הוצאה
- **הקטגוריה כבר נבחרת אוטומטית!**
- צריך רק למלא: תאריך, תיאור, סכום, מי שילם, הערות

#### 🔙 **חזרה למסך ראשי**
- כפתור **"חזור"** בתחתית המסך
- חזרה ללשונית הוצאות הראשית

---

## 🛡️ זהירות מקסימלית - לא נהרס כלום!

### ✅ **מה שמור:**
1. ✅ **כל הפונקציות הקיימות עובדות בדיוק כמו קודם**
2. ✅ **טבלת ההוצאות הראשית לא השתנתה**
3. ✅ **הוספת הוצאה חדשה - עובד כרגיל**
4. ✅ **עריכת הוצאה - עובד כרגיל**
5. ✅ **מחיקת הוצאה - עובד כרגיל**
6. ✅ **צפייה בקבלה - עובד כרגיל**
7. ✅ **סינון וחיפוש - עובד כרגיל**
8. ✅ **סיכום הוצאות - עובד כרגיל**

### 🎁 **מה נוסף:**
- ➕ **רק נוספה תכונה חדשה** - עריכה לפי קטגוריה
- ➕ **אפשרות נוספת לניהול הוצאות** - יותר נוח ומהיר!
- ➕ **אין שום שינוי בפונקציונליות קיימת**

---

## 📦 קבצים שהשתנו

### 1️⃣ **index.html**
**שינויים:**
- הוספת `onclick="editExpensesByCategory('category')"` לכל כרטיס קטגוריה (8 קטגוריות)
- הוספת `cursor: pointer` ו-tooltip לכל קטגוריה
- הוספת אייקון ✏️ קטן ליד שם הקטגוריה
- הוספת מודל חדש: `categoryExpensesModal` עם טבלה לעריכה

### 2️⃣ **js/app.js**
**פונקציות חדשות:**

#### 🔹 `editExpensesByCategory(category)`
- מקבלת קטגוריה (למשל: 'electricity', 'elevator')
- מסננת את כל ההוצאות בקטגוריה זו
- מציגה אותן בטבלה במודל
- מאפשרת עריכה ומחיקה של כל הוצאה

#### 🔹 `addExpenseInCategory(category)`
- פותחת מודל הוספת הוצאה חדשה
- **הקטגוריה כבר נבחרת אוטומטית**
- מקלה על הוספת הוצאה חדשה באותה קטגוריה

#### 🔹 `deleteExpenseFromCategory(id, category)`
- מוחקת הוצאה ספציפית
- **מעדכנת גם את מסך עריכת הקטגוריה**
- מעדכנת גם את הטבלה הראשית

**Event Listeners חדשים:**
- `closeCategoryExpensesModal` - סגירת המודל

---

## 🎁 גיבוי

לפני השינויים, **נוצר גיבוי מלא** של כל הקבצים:

- ✅ `index.html.backup-v2.6.0-before-category-edit`
- ✅ `js/app.js.backup-v2.6.0-before-category-edit`

**במקרה של בעיה** - אפשר לשחזר מהגיבוי!

---

## 🔥 כיצד להשתמש?

### 📝 **תרחיש לדוגמה:**

אתה רוצה לראות את כל הוצאות החשמל ולערוך אותן:

1. **היכנס ללשונית "הוצאות"**
2. **ראה את כרטיס "חשמל"** (עם אייקון ⚡ ו-✏️)
3. **לחץ על הכרטיס** 👆
4. **נפתח מסך עריכה** 📋 עם כל הוצאות החשמל
5. **בחר הוצאה לעריכה** → לחץ ✏️ → ערוך → שמור ✅
6. **או מחק הוצאה** → לחץ 🗑️ → אשר ✅
7. **או הוסף הוצאה חדשה** → לחץ ➕ → מלא פרטים → שמור ✅
8. **חזור למסך ראשי** → לחץ 🔙

---

## ✅ בדיקות שבוצעו

- ✅ **הדף נטען ללא שגיאות JavaScript**
- ✅ **כל הפונקציות הקיימות עובדות**
- ✅ **לחיצה על קטגוריה פותחת מודל**
- ✅ **עריכה ומחיקה עובדות במודל**
- ✅ **הוספה עובדת עם קטגוריה מוקדמת**
- ✅ **סגירת המודל עובדת**
- ✅ **כל הנתונים נשמרים ב-LocalStorage**

---

## 🎉 סיכום

### ✨ **תכונה חדשה:**
- עריכת הוצאות לפי קטגוריה

### 🛡️ **שמירה על קיים:**
- כל הפונקציות הקיימות לא נפגעו

### 📈 **יתרונות:**
- ניהול הוצאות יותר נוח ומהיר
- ארגון מעולה לפי קטגוריה
- חוויית משתמש משופרת

### 🎁 **גיבוי מלא:**
- אפשר לשחזר אם צריך

---

**תהנה מהתכונה החדשה! 🎉**

**מפתח ובעלים:** בועז סעדה  
**גרסה:** 2.6.1  
**תאריך:** 09/01/2026  
